;jQTubeUtil=(function($){var f=function(){};var p=f.prototype;var MaxResults=10,StartPoint=1,BaseURL="https://gdata.youtube.com",FeedsURL=BaseURL+"/feeds/api",VideoURL=FeedsURL+"/videos/",SearchURL=FeedsURL+"/videos",StandardFeedsURL=FeedsURL+"/standardfeeds",MostViewed=StandardFeedsURL+"/most_viewed"
MostPopular=StandardFeedsURL+"/most_popular",MostRecent=StandardFeedsURL+"/most_recent",TopRated=StandardFeedsURL+"/top_rated",TopFavs=StandardFeedsURL+"/top_favorites",RecentlyFeatured=StandardFeedsURL+"/recently_featured",SuggestURL="https://suggestqueries.google.com/complete/search",Times=["today","this_week","this_month","all_time"],OrderBy=["relevance","published","viewCount","rating"],Categories=["Film","Autos","Music","Animals","Sports","Travel","Shortmov","Videoblog","Games","Comedy","People","News","Entertainment","Education","Howto","Nonprofit","Tech"];var SearchDefaults={"q":"","orderby":OrderBy[2],"time":Times[3],"max-results":MaxResults};var CoreDefaults={"v":"2","key":"","format":5,"alt":"json","callback":"?"};var SuggestDefaults={hl:"en",ds:"yt",client:"youtube",hjson:"t",cp:1};p.init=function(options){if(!options.key)throw"jQTubeUtil requires a key!";CoreDefaults.key=options.key;if(options.orderby)
SearchDefaults.orderby=options.orderby;if(options.time)
SearchDefaults.time=options.time;if(options.maxResults)
SearchDefaults["max-results"]=MaxResults=options.maxResults;if(options.lang)
SuggestDefaults.hl=options.lang;};p.getTimes=function(){return Times;};p.getOrders=function(){return OrderBy;};p.getCategories=function(){return Categories;};p.suggest=function(input,callback){var opts={q:encodeURIComponent(input)};var url=_buildURL(SuggestURL,$.extend({},SuggestDefaults,opts));$.ajax({type:"GET",dataType:"json",url:url,success:function(xhr){var suggestions=[],res={};for(entry in xhr[1]){suggestions.push(xhr[1][entry][0]);}
res.suggestions=suggestions;res.searchURL=url;if(typeof(callback)=="function"){callback(res);return;}}});};p.search=function(input,cb,category){if(typeof(input)=="string")
input={"q":encodeURIComponent(input)};if(null!=category)
category={"category":category};else
category={};return _search($.extend({},SearchDefaults,input,category),cb);};p.video=function(vid,cb){return _request(VideoURL+vid+"?alt=json",cb);};p.related=function(vid,cb){return _request(VideoURL+vid+"/related?alt=json",cb);};p.mostViewed=function(incoming,callback){return _getFeedRequest(MostViewed,getOptions(incoming,true),callback);};p.mostRecent=function(incoming,callback){return _getFeedRequest(MostRecent,getOptions(incoming,false),callback);};p.mostPopular=function(incoming,callback){return _getFeedRequest(MostPopular,getOptions(incoming,true),callback);};p.topRated=function(incoming,callback){return _getFeedRequest(TopRated,getOptions(incoming,true),callback);};p.topFavs=function(incoming,callback){return _getFeedRequest(TopFavs,getOptions(incoming,true),callback);};function _getFeedRequest(baseURL,options,callback){var reqUrlParams={"max-results":options.max||MaxResults,"start-index":options.start||StartPoint};if(options.time)reqUrlParams.time=options.time;var url=_buildURL(baseURL,reqUrlParams);return _request(url,options.callback||callback);};function getOptions(arg,hasTime){switch(typeof(arg)){case"function":return{callback:arg,time:undefined};case"object":var ret={max:arg.max,start:arg['start-index']};if(hasTime)ret.time=arg.time;return ret;default:return{};break;}};function _search(options,callback){var URL=_buildURL(SearchURL,options);return _request(URL,callback);};function _request(url,callback){var res={};$.ajax({type:"GET",dataType:"json",url:url,success:function(xhr){if((typeof(xhr)=="undefined")||(xhr==null))return;var videos=[];if(xhr.feed){var feed=xhr.feed;var entries=xhr.feed.entry;for(entry in entries)
videos.push(new YouTubeVideo(entries[entry]));res.startIndex=feed.openSearch$startIndex.$t;res.itemsPerPage=feed.openSearch$itemsPerPage.$t;res.totalResults=feed.openSearch$totalResults.$t;}else{videos.push(new YouTubeVideo(xhr.entry));}
res.version=xhr.version;res.searchURL=url;res.videos=videos;if(typeof(callback)=="function"){callback(res);return;}},error:function(e){throw Exception("couldn't fetch YouTube request : "+url+" : "+e);}});return res;};function _buildURL(root,options){var ret="?",k,v,first=true;var opts=$.extend({},options,CoreDefaults);for(o in opts){k=o;v=opts[o];ret+=(first?"":"&")+k+"="+v;first=false;}
return root+ret;};var YouTubeVideo=function(entry){var unavail=[];var id=entry.id.$t;var start=id.lastIndexOf(':')+1;var end=id.length;this.videoId=id.substring(start,end);this.entry=entry;this.title=entry.title.$t;try{this.updated=entry.updated.$t;}catch(e){unavail.push("updated");}
try{this.thumbs=entry.media$group.media$thumbnail;}catch(e){unavail.push("thumbs");}
try{this.duration=entry.media$group.yt$duration.seconds;}catch(e){unavail.push("duration");}
try{this.favCount=entry.yt$statistics.favoriteCount;}catch(e){unavail.push("favCount");}
try{this.rating=entry.gd$rating;}catch(e){alert(e);unavail.push("rating");}
try{this.viewCount=entry.yt$statistics.viewCount;}catch(e){unavail.push("viewCount");}
try{this.category=entry.media$group.media$category[0].$t;}catch(e){unavail.push("category");}
try{this.categoryLabel=entry.media$group.media$category[0].label;}catch(e){unavail.push("categoryLabel");}
try{this.description=entry.media$group.media$description.$t;}catch(e){unavail.push("description");}
try{this.keywords=entry.media$group.media$keywords.$t;}catch(e){unavail.push("keywords");}
this.unavailAttributes=unavail;};return new f();})(jQuery);